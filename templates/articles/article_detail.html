{% extends 'layout.html' %}
{% block content %}


<h1>{{ article.author }} 의 게시물</h1>
<ul>
    <img class="t-h-[100px]" src='{{ article.image.url }}' alt="">
    <li>내용 : {{ article.content }}</li>
    <li>업로드 날짜 : {{ article.reg_date }}</li>
    <li>수정 날짜 : {{ article.update_date }}</li>
    </div>
    {% if request.user == article.author %}
    <div class="my-3">
        <a href="{% url 'article:update' article.id %}"
           class="btn btn-sm btn-outline-secondary">수정</a>
        <a href="{% url 'article:delete' article.id %}"
           class="btn btn-sm btn-outline-secondary">삭제</a>
    </div>

    {% endif %}
    <!-- 질문 댓글 Start -->
    {% if article.comment_set.count > 0 %}
    <div class="mt-3">
        {% for comment in article.comment_set.all %}  <!-- 등록한 댓글을 출력 -->
        <div class="comment py-2 text-muted">  <!-- 댓글 각각에 comment 스타일 지정 -->
            <span style="white-space: pre-line;">{{ comment.content }}</span>
            <span>
                - {{ comment.author }}, {{ comment.reg_date }}
                {% if comment.update_date %}
                (수정:{{ comment.update_date }})
                {% endif %}
            </span>
            {% if request.user == comment.author %}
            <a href="{% url 'article:comment_update' comment.id  %}" class="small">수정</a>,
            <a href="{% url 'article:comment_delete' comment.id  %}" class="small delete"
               data-uri="#">삭제</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    <div>
        <a href="{% url 'article:comment_create' article.id  %}"
           class="small"><small>댓글 추가 ..</small></a>  <!-- 댓글 추가 링크 -->
    </div>
    <!-- 댓글 End -->
</ul>

{% endblock %}

<!-- ERROR : 삭제 문구 안뜸 -->
{% block script %}
<script type='text/javascript'>
$(document).ready(function(){
    $(".delete").on('click', function() {
        if(confirm("정말로 삭제하시겠습니까?")) {
            location.href = $(this).data('uri');
        }
    });
});


</script>
{% endblock %}